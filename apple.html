<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <link rel="stylesheet" href="psg.css" type="text/css">
  <LINK REL="SHORTCUT ICON" HREF="favicon.ico" type="image/x-icon"/>
  <META NAME="description" content="System Administrator Pocket Survival Guide -  A series of notes for Sys Admin"/>
  <META NAME="keyword" content="Sys Admin, System Administrator, Solaris, HP-UX, AIX, Linux, Note, Notes, Pocket, Survival, Guide, psg, data center, power, electrical, plug, LYS, LKS, LAPPLAPP"/>
  <META NAME="Robots" CONTENT="all"/>
  <META NAME="Author" CONTENT="Tin Ho"/>

  <title>Pocket Survival Guide - Apple/Mac</title>
</head>

<body> 
<div class="navheader">
<table summary="Navigation header" width="100%">
  <tbody>
    <tr>
      <th colspan="9" align="center">
	  
<A HREF="http://psg.ask-margo.com/apple.html">Sys Admin Pocket Survival Guide - Apple/Mac</A>

      </th>
    </tr>
    <tr>
      <td align="left">  <a accesskey="h" href="psg.html">Home</a>	</td>
      <td align="center"><a accesskey="s" href="sol.html">Solaris</a>	</td>
      <td align="center"><a accesskey="p" href="hpux.html">HP-UX</a>	</td>
      <td align="center"><a accesskey="a" href="aix.html">AIX</a>	</td>
      <td align="center"><a accesskey="n" href="netapp.html">NetApp</a>	</td>
      <td align="center"><a accesskey="e" href="emc.html">EMC</a>	</td>
      <td align="center"><a accesskey="e" href="python.html">Python</a>	</td>
      <td align="right"> <a accesskey="l" href="ldap.html">LDAP</a>	</td>
    </tr>
  </tbody>
</table>
<hr></div>

<div class="chapter" lang="en">
<div class="titlepage">
</div>
</div>

<!-- ######################################################################### -->


<div align="CENTER">
<A HREF="http://www.explainxkcd.com/wiki/index.php/18"><IMG SRC="fig/xkcd_snapple.png"></A><BR>
</div>


<H1>Keyboard shortcuts</H1>


<A HREF="https://support.apple.com/en-us/HT201236">keyboard shortcuts from apple support</A>
<BR>

Some less intuitive keyboard binding from a windoze/linux user perspective: <BR>
<BR>
<PRE>
Cmd/Command = Windows key 
Option      = Alt
Control     = ^
</PRE>
<BR><BR>

<H5>Windows Switching</H5>

<PRE>

Cmd-Tab				Switch apps: Switch to the next most recently used app among your open apps. 
Cmd-`     			Switch windows w/in app, within SAME WORKSPACE (works in Terminal and firefox)
Cmd-Sh ~ (Cmd-Tilde)		Switch windows: Switch to the next most recently used window of the front app. 
Cmd-alt-Lf/Rg 			cycle thru tabs in chrome.  
Cmd-    Lf/Rg 		        cycle thru windows in Terminal app, ACROSS workSpaces.  Chrome "BACK" and "FWD" on page (URL) navigation.

   ctrl-tab			cycle thru tabs    in Terminal app
sh-ctrl-tab

     Cmd-Sh-4	( cmd-$)	# cropping method.  save to .png in desktop (10.12.5?) 
Ctrl-Cmd-Sh-4	(^cmd-$)	# cropping method.  send to clipboard (no saving to file)
     Cmd-Sh-3			# screenshot of the entire screen, save to .png on desktop. 
Ctrl-Cmd-Sh-3	(^cmd-#)	# screenshot of the entire screen, send to clipboard (no saving to file)

Cmd-,				# Preferences: Open preferences for the front app.

^-Sh-Power/Eject		# Lock screen (Windows-L)


Mac			Win/Linux,vi/bash?	Action
-----------------	--------- --------	-----------------------------------------------
Cmd-W			^W			close tab/window
		   ^F4
Cmd-Q			Alt-F4			quit app

</PRE>


<H5>Text Editing/Document Navigation</H5>

<PRE>

Mac			Win/Linux,vi/bash?	Action
-----------------	--------- --------	-----------------------------------------------
Alt-Lf/Rg               ^Lf/Rg 			Word left/right, even in Terminal

Alt-Del/Bksp		^Del/Bksp		Delete word			

Alt-Up/Dn		Hm/End    v,b		Begining/End of line
Cmd-Lf/Rg		Hm/End			Begining/End of line	[official apple publish]
^A/E			          ^A/E		Begining/End of line

Cmd-Up/Dn		^Hm/End			Top/End of doc
Hm/End 			^Hm/End			Top/End of doc

^Lf/Rg 						SPACES (workspace) Left/Right
3finger swipe Lf/Rg				SPACES (workspace) Left/Right
						(Gnome3 use vertical stacked workspace and use mouse wheel to nagivate.  

</PRE>

Editor keybind that will probably never use:

<PRE>
Control-L	Center the cursor or selection in the visible area.
Control-O	Insert a new line after the insertion point.
Control-T	Swap the character behind the insertion point with the character in front of the insertion point.
</PRE>


These looks similar to bash shell prompt binding:  <BR>
But could just use arrow keys.  Maybe more useful in vi mode?  <BR><BR>

<PRE>
Control-F	Move one character forward.              LEFT ARROW
Control-B	Move one character backward.
Control-P	Move up one line.                        UP ARROW
Control-N	Move down one line.
</PRE>


Terminal app keybindings   <BR>
(probably add screenshots) <BR><BR>

<PRE>
Cmd-Up/Dn			Terminal navigate thru command history
</PRE>

<H5>Sloppy Mouse</H5>

From server fault, can get mouse follow focus for just the terminal app.
only for Terminal app, not all app.  But better than nothing!  <BR>
<BR>
Run this cmd in terminal, then restart:
<BR>
<BR>
<TT>defaults write com.apple.Terminal FocusFollowsMouse -boolean YES</TT>
<BR>
<BR>

<H1>cli in Mac OS/X</H1>

<PRE>

smbutil  view  //samba-server		# ~ smbclient -N -L //samba-server

</PRE>

<H1>Package managers for Mac OS/X</H1>

<PRE>

MacPort 	- formerly Darwin port
		  contain lot of "unix style" software packages.
		  install to /opt/local

fink		= package manager like Ubuntu apt-get, oft used by users from Debian world.
		  need to be installed separately, create resource tree independent of mac os x, more unixy...
		  more cutting edge that Mac OS Port.  May have pre-compiled binaries.
		  install to /sw

rudix		= pre-compiled unix sw for OS X (Yosemite in progress, Maverick and older okay)
		  hassle-free.  http://rudix.org/


homebrew	= http://brew.sh/
		  install to /usr/local, which is said why it works!  changing path not recommended!
		  have not been able to get it to install/work behind a proxy :( 
		  Said to depends more on mac os x native packages, more integrated, uses less space.
		  Intended audience = mac users.  
		  <TT>/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</TT>
		  <TT>brew install caskroom/cask/burn added a GUI Burn.app into Applications.</TT>


nix		= from NixOS, meant to be a declarative (stateless) package management.  
		  package are build from source, but cached to provide performance close to traditional binary-based package manager.

</PRE>

<A HREF="https://apple.stackexchange.com/questions/64690/macports-vs-fink-vs-homebrew">Comarison discussion in Stack Exchange :: Ask Different</A>


<PRE>

</PRE>



<H5>Fink Install</H5>

<OL>
<LI> Requirements: Java, Xcode 
<LI> Download installer and follow instructions from 
	<A HREF="http://www.finkproject.org/download/srcdist.php">http://www.finkproject.org/download/srcdist.php</A>
</OL>

<PRE>
sudo xcode-select --install
sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer/
sudo xcodebuild -license
tar -xvf fink-0.41.1.tar.gz 
cd fink-*
./bootstrap 
# long build process...
</PRE>

<PRE class="quote">
You should now have a working Fink installation in '/sw'. You still need package descriptions if you want to compile packages yourself. You can get them
by installing the dists-10.12-0.16.0.tar.gz tarball, or by running either of the commands: 'fink selfupdate-rsync', to update via rsync (generally
preferred); or 'fink selfupdate-cvs', to update via CVS (more likely to work through a firewall). You should also run 'sudo xcodebuild -license' and
accept the Xcode license, since some packages will require this.

Run '. /sw/bin/init.sh' to set up this terminal session environment to use Fink. To make the software installed by Fink available in all of your future
terminal shells, add '. /sw/bin/init.sh' to the init script '.profile' or '.bash_profile' in your home directory. The program /sw/bin/pathsetup.sh can
help with this. Enjoy.
</PRE>



<H5>Obsolete method to install Fink</H5>

No longer works?  cuz fink group no longer building .dmg?

<PRE>
installer -pkg Fink*pkg -target LocalSystem
	# similar to rpm -i sw.rpm 
  	# -target LocalSystem is the equiv of the GUI telling where to put the program.  Should be able to use / also.


pkgutil --pkgs 		# list packages installed on system (.pkg, not stuff that Fink install, which are .deb packages).
			# os x command?  but no longer avail in 10.12 ?

dmg are sw image that are &quot;mounted&quot;, accessible from /Volumes.  
Firefox can run off inside such mount.  
Other apps req copying the files there to /Applications folder.  
Yet other require an install from there.

</PRE>

<H5>Fink Use</H5>

<PRE>

. /sw/bin/init.sh


fink selfupdate
 			# update fink db, support http_proxy env var if proxy need to be set.
fink list 		# list avail packages.  no samba or smbclient.  
			# don't see if it provides anything that homebrew don't
			# fink is prob no longer worth the trouble
fink install ...

apt-get
dpkg --list 		# list debian packages (installed by fink)

</PRE>


<A NAME="firewall"></A>
<H1>Firewall</H1>

With ~ 10.5, application-based firewall is the default firewall app (controlled by the GUI).  It is a port of OpenBSD PF.
It is good for laptop user who control access to app in allowing remote connection.  But it is not so great for a server-oriented firewall that may want to limit access by IP address range.  In such cases, the old IPFW (derived from FreeBSD) is available from the CLI.  IPFW actually takes precedence over PF; neither of them are on by default.
<BR>
<BR>


Ref: 
<LI><A HREF="https://support.apple.com/en-us/HT201642">firewall from apple support 10.5+</A>
<LI><A HREF="http://blog.scottlowe.org/2012/04/05/setting-up-ipfw-on-mac-os-x/">guide on setting up ipfw</A>

<BR>


<H1></H1>

<H2>intel-based mac stuff</H2>

<PRE>

while booting up:
option	= select OS to boot with (when bootcamp is configured)
apple+t = target firewire disk mode  (or just press T key?)
apple+v = verbose mode (this time only)
apple+s = single user mode (but don't run fsck from here! boot from DVD for such action!)  (or just s ?)

shift   = Safe Boot mode - https://support.apple.com/en-us/HT201262



command+r = recovery mode (same as a the recovery choice when "option" key boot).

Permanently disable flashy non-useful boot screen (ie, verbose unix-like booting):
go to terminal, run
	sudo nvram boot-args="-v"
To see current settings:
	nvram -p   			




</PRE>

<!--mac.ref-->
<H2>Older mac stuff</H2>

<PRE>

key binding:

cmd key is the apple key
option = alt
ctrl  = control (^)

cmd+tab = similar to windoze alt+tab
boot, option key = boot current os
boot, c = boot from cd
apple + control + power = reboot

---

Enable unix mode boot:
Older Macs:
While booting, enter cmd+opt+O-F
then,
setenv boot-args=-v
shut-down 
This will cause machine to boot like sun machines.


switching between XDarwin X session and Aqua:
ctrl+opt+A
(10.5, they can coexist together)

---


NIS info from
http://www.bresink.de/osx/nis.html

OS X can act as NIS server.
yp files are in /var/yp
init rc file (?) at
/System/Library/StartupItems/DirectoryServices/DirectoryServices 


OS X NIS client.
Some minimal info in lookupd.
Leopard 10.5 has NIS client build-in.  Just need to specify NIS domain and servers.


NFS mount.  Can specify the mounts in /etc/fstab, linux format.

</PRE>



<H5>Troubleshooting boot up</H5>

<PRE>

Info from Jim.  Appicable to old Mac (PowerPC) 

If the critter won't start up with the C key held down, try the
following (with the CD in the drive)
Hold the Option key on startup, and choose the CD icon and then click
the right-pointing arrow, or
hold control-option-shift-delete on startup.

The former is an Open Firmware method, and the latter is a shortcut to
tell the MacOS Rom to boot form the next available system volume.

If both of these methods fail, restart and hold down option-apple-p-r
for four startup chimes, then try the above methods again. (this resets
pram)


</PRE>

<H1>Progies</H1>

<PRE>
iTerm : a better terminal prog than the one that comes with OS X.
</PRE>

<H3>References</H3>

<LI>http://www.osxfaq.com/Tutorials/LearningCenter/HowTo/Startup/index.ws
sample startup script in location which is now deemed archaic: <BR>
/System/Library/StartupItems - Apple's only
/Library/StartupItems  - User's customization
<BR>
<LI>http://developer.apple.com/macosx/launchd.html launchd article from ADC
<LI>http://oreilly.com/pub/a/mac/2002/10/22/macforunix.html  Mac tips for Unix geeks


<A ID="serial"></A>
<H3>Serial</H3>

<PRE>
screen /dev/tty.usbserial 9600
	# ^A k 		: kill the connection (terminate screen and its use of /dev/tty...)
	# ^A ^B b  	: send break (for sun's go prompt)

minicom -o -D /dev/tty.usbserial 

minicom -o -D /dev/tty.usbserial -8 -b 9600 
	# ESC-z  (hold esc while pressing z) is the default META-Z for help!)
	# ESC-X  (ESC + upper X at same time) = exit
	# -o = don't init modem, since can't access /dev/modem 
	# no need to run as sudo
	# brew install minicom
</PRE>

See also <A HREF="linux.html#minicom">linux#minicom</A> <BR>


<A ID="hate"></A>
<H3>PS</H3>
Why I hate Mac OS X ?
<UL>
<LI> Linux terminal, highlight with mouse, paste with middle click.  Or Shift-Insert.  No middle click on any apple mouse/touchpad; or if there were, I have not been able to produce the paste behavior.  The Terminal app allows pasting with PC mouse middle click.  But the clipboard isn't shared with other app (eg chrome).  So it is still often stilll needing the cmd-c and cmd-v.  your hands has just to move between keyboard and mouse so much more often.

<LI> How do you access the File menu with the keyboard?   In Google Docs, Ctrl-Alt-f.  Yeah yeah, on the mac it is called the option key.  I like the derailure and change track logo.  But that reminds me of Alternate path, not option.  So there.

<LI> Windows borders please.  I have *a lot* of terminals windows open.  

<LI> Finder.  It ain't file explorer/manager.

<LI> Finder.  Why can't you refresh?  No way to trigger a refresh either??!!??!!

<LI> Finder.  Why is Cmd-N open a new tab?  T for tab, no?  Tab and window are two things, they each lead their own life. 

<LI> Finder: Where is the root of my file system?    Go to Folder. Sh-Cmd-G, /.  

<LI> Finder: How do I select a lot, most, but not all files of a directory?  Shift PageDown don't work?  Oh that's right, steve jobs doesn't know what a Page Down key is.  That's just any key, right?

<LI> Finder: where are the pics on the iphone??   Run Image Capture.  
<LI> Image Capture: How do I move pics from the phone to the computer?  Copy and delete.  

<LI> Finder: how many GB are these files taking up ?

<LI> If I am on the mouse (not touchpad), how do i switch workspace?  I got to click on where and where and where and where??  *sigh*

</UL>

<BR>

These are cultural, but they have been imprinted into my brain.

<UL>
<LI> Sloppy mouse.  Cuz I am a sloppy guy.
<LI> I want Alt-Tab.  Not Cmd-Tab AND Cmd-` AND Cmd-Lf/Rg.  When I alt-tab between a browser and a terminal, i want ONE window to come to foreground, NOT ALL windows of the app to cover the other window I want to read things from!
</UL>

<BR><HR><BR>


<div align="CENTER">
  [Doc URL: <A HREF="http://psg.ask-margo.com/apple.html">http://psg.ask-margo.com/apple.html</A>] 
<BR>
(cc) Tin Ho. See 
<A HREF=psg.html#cc>main page</A>
 for copyright info. <BR>
<HR>
<A HREF="http://www.taos.com"><IMG SRC="banner/taos_banner1.gif" width="728" height="98"></A>
</div>
<div class="sig"><BR>
  hoti1<BR>
  bofh1</div>


</body>

<!-- Google analytics new tracking code ga.js.   Will actually need to add this code to every page for full tracking!    (still the case in 2011?) Using my gmail login 2011.0617 updated with code for http://tin6150.github.io/psg/psg.html -->    <script type="text/javascript">    var _gaq = _gaq || [];   _gaq.push(['_setAccount', 'UA-4515095-4']);   _gaq.push(['_trackPageview']);    (function() {     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);   })();  </script>


</html>
